<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>NYTEMODE Academy Admin</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <!-- Sveltia CMS - Modern replacement for Decap CMS with better UX -->
  <script src="https://unpkg.com/@sveltia/cms/dist/sveltia-cms.js"></script>

  <script>
    // Register preview styles to match NYTEMODE Academy branding
    CMS.registerPreviewStyle('/css/global.css');

    // Additional preview-specific styles
    CMS.registerPreviewStyle(`
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: #0c0c0c;
        color: #fff;
        padding: 2rem;
        line-height: 1.6;
      }

      h1, h2, h3, h4, h5, h6 {
        color: #fff;
        margin-bottom: 1rem;
      }

      h1 { font-size: 2.5rem; font-weight: 700; }
      h2 { font-size: 2rem; font-weight: 600; }
      h3 { font-size: 1.5rem; font-weight: 600; }

      p {
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 1rem;
      }

      a {
        color: #9d6ece;
      }

      img {
        max-width: 100%;
        border-radius: 12px;
      }

      code {
        background: #1a1a1a;
        padding: 0.2em 0.4em;
        border-radius: 4px;
        font-size: 0.9em;
      }

      pre {
        background: #1a1a1a;
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
      }

      blockquote {
        border-left: 3px solid #9d6ece;
        padding-left: 1rem;
        margin-left: 0;
        color: rgba(255, 255, 255, 0.7);
        font-style: italic;
      }

      ul, ol {
        margin-bottom: 1rem;
        padding-left: 1.5rem;
      }

      li {
        margin-bottom: 0.5rem;
        color: rgba(255, 255, 255, 0.8);
      }

      .preview-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .preview-badge.premium {
        background: rgba(157, 110, 206, 0.15);
        color: #9d6ece;
      }

      .preview-badge.category {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.7);
      }

      .preview-meta {
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.875rem;
      }

      .preview-card {
        background: #151515;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1rem;
      }

      .preview-thumbnail {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        margin-bottom: 1rem;
      }
    `, { raw: true });

    // Course Preview Template
    const CoursePreview = createClass({
      render: function() {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const description = entry.getIn(['data', 'description']);
        const category = entry.getIn(['data', 'category']);
        const premium = entry.getIn(['data', 'premium']);
        const thumbnail = entry.getIn(['data', 'thumbnail']);
        const lessons = entry.getIn(['data', 'lessons']);
        const whatYouWillLearn = entry.getIn(['data', 'whatYouWillLearn']);

        return h('div', { className: 'preview-card' },
          thumbnail && h('img', {
            src: this.props.getAsset(thumbnail).toString(),
            className: 'preview-thumbnail',
            alt: title
          }),
          h('div', { style: { display: 'flex', gap: '0.5rem', marginBottom: '1rem' } },
            category && h('span', { className: 'preview-badge category' }, category),
            premium && h('span', { className: 'preview-badge premium' }, 'Premium')
          ),
          h('h1', {}, title),
          h('p', { style: { fontSize: '1.125rem' } }, description),
          lessons && lessons.size > 0 && h('div', {},
            h('h3', {}, lessons.size + ' Lessons'),
            h('ul', {},
              lessons.map((lesson, i) =>
                h('li', { key: i },
                  lesson.get('title'),
                  lesson.get('duration') && h('span', { style: { color: 'rgba(255,255,255,0.5)', marginLeft: '0.5rem' } },
                    '(' + lesson.get('duration') + ')'
                  )
                )
              ).toArray()
            )
          ),
          whatYouWillLearn && whatYouWillLearn.size > 0 && h('div', {},
            h('h3', {}, "What You'll Learn"),
            h('ul', {},
              whatYouWillLearn.map((item, i) =>
                h('li', { key: i }, item)
              ).toArray()
            )
          ),
          this.props.widgetFor('body')
        );
      }
    });
    CMS.registerPreviewTemplate('courses', CoursePreview);

    // Lesson Preview Template
    const LessonPreview = createClass({
      render: function() {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const courseTitle = entry.getIn(['data', 'courseTitle']);
        const duration = entry.getIn(['data', 'duration']);
        const premium = entry.getIn(['data', 'premium']);
        const video = entry.getIn(['data', 'video']);

        return h('div', {},
          h('div', { className: 'preview-meta' },
            courseTitle && h('span', {}, 'Course: ' + courseTitle),
            duration && h('span', {}, duration)
          ),
          h('div', { style: { display: 'flex', gap: '0.5rem', marginBottom: '1rem' } },
            premium && h('span', { className: 'preview-badge premium' }, 'Premium')
          ),
          h('h1', {}, title),
          video && h('div', {
            style: {
              background: '#1a1a1a',
              padding: '2rem',
              borderRadius: '12px',
              marginBottom: '1.5rem',
              textAlign: 'center',
              color: 'rgba(255,255,255,0.5)'
            }
          }, 'Video: ' + video),
          h('div', { className: 'preview-card' },
            this.props.widgetFor('body')
          )
        );
      }
    });
    CMS.registerPreviewTemplate('lessons', LessonPreview);

    // News Article Preview Template
    const NewsPreview = createClass({
      render: function() {
        const entry = this.props.entry;
        const title = entry.getIn(['data', 'title']);
        const excerpt = entry.getIn(['data', 'excerpt']);
        const category = entry.getIn(['data', 'category']);
        const date = entry.getIn(['data', 'date']);
        const thumbnail = entry.getIn(['data', 'thumbnail']);

        const formattedDate = date ? new Date(date).toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        }) : '';

        return h('article', {},
          thumbnail && h('img', {
            src: this.props.getAsset(thumbnail).toString(),
            className: 'preview-thumbnail',
            alt: title
          }),
          h('div', { style: { display: 'flex', gap: '0.5rem', marginBottom: '1rem' } },
            category && h('span', { className: 'preview-badge category' }, category)
          ),
          h('div', { className: 'preview-meta' },
            formattedDate && h('span', {}, formattedDate)
          ),
          h('h1', {}, title),
          excerpt && h('p', { style: { fontSize: '1.25rem', color: 'rgba(255,255,255,0.7)' } }, excerpt),
          h('hr', { style: { border: 'none', borderTop: '1px solid rgba(255,255,255,0.1)', margin: '2rem 0' } }),
          this.props.widgetFor('body')
        );
      }
    });
    CMS.registerPreviewTemplate('news', NewsPreview);
  </script>
</body>
</html>
